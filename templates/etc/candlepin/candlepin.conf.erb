#
# WARNING: THIS CONFIGURATION WAS GENERATED BY KATELLO-CONFIGURE TOOL,
# CHANGES WILL LIKELY BE OVERWRITTEN.
#

jpa.config.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
jpa.config.hibernate.connection.driver_class=org.postgresql.Driver
jpa.config.hibernate.connection.url=jdbc:postgresql:<%= scope.lookupvar("candlepin::db_name") %>
jpa.config.hibernate.hbm2ddl.auto=validate
jpa.config.hibernate.connection.username=<%= scope.lookupvar("candlepin::db_user") %>
<% Puppet::Parser::Functions::function('katello_passencrypt') %>
jpa.config.hibernate.connection.password=<%= scope.function_katello_passencrypt([scope.lookupvar("candlepin::db_pass")]) %>
candlepin.consumer_system_name_pattern = .+
candlepin.environment_content_filtering=<%= scope.lookupvar("candlepin::env_filtering_enabled") %>
candlepin.auth.basic.enable = false
candlepin.auth.trusted.enable = false
candlepin.enable_cert_v3=true
candlepin.export.prefix.weburl=<%= scope.lookupvar("candlepin::weburl") %>
candlepin.export.prefix.apiurl=<%= scope.lookupvar("candlepin::apiurl") %>

<% if scope.lookupvar("candlepin::oauth_key") != "" -%>
module.config.katello=org.candlepin.katello.KatelloModule
candlepin.auth.oauth.enable = true
candlepin.auth.oauth.consumer.<%= scope.lookupvar("candlepin::oauth_key") %>.secret = <%= scope.lookupvar("candlepin::oauth_secret") %>
candlepin.crl.file = <%= scope.lookupvar("candlepin::crl_file") %>
<%- end -%>

<% if scope.lookupvar("candlepin::thumbslug_enabled") -%>
candlepin.auth.oauth.consumer.thumbslug.secret = <%= scope.lookupvar("candlepin::thumbslug_oauth_secret") %>
<%- end -%>
